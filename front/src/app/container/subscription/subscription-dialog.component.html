<div mat-dialog-title>
	<h3>Subscription</h3>

	<button aria-label="close dialog" mat-dialog-close mat-icon-button>
		<mat-icon>close</mat-icon>
	</button>
</div>
<div class="list" mat-dialog-content style="text-align: center;">
	<div style="padding: 12px 28px">
		<mat-card>
			<mat-card-header>
				<mat-card-subtitle fxLayout="row" fxLayoutAlign="space-between center">
					<h3>{{licence?.plan}}</h3>
					<span>Limited to {{licence?.dbLimit}} DBs</span>
					<div>
						<mat-icon *ngIf="licence?.valid" color="primary">check_circle</mat-icon>
						<mat-icon *ngIf="!licence?.valid" color="warn">cancel</mat-icon>
					</div>
				</mat-card-subtitle>
			</mat-card-header>
			<mat-card-content fxLayout="row" fxLayoutAlign="space-evenly center">
				<span *ngIf="licence?.email">{{licence?.email}}</span>
				<span *ngIf="licence?.expire! > 0">Expire : {{licence?.expire! * 1000 | date: 'mediumDate'}}</span>
			</mat-card-content>
		</mat-card>

		<mat-form-field appearance="outline" style="width: 100%;">
			<mat-label>Register a subscription with your mail</mat-label>
			<input #mail [formControl]="email" autocomplete="off" matInput type="text">
		</mat-form-field>
	</div>
</div>
<mat-dialog-actions>
	<a href="https://webdb.app/price" mat-stroked-button target="_blank">
			<span class="material-symbols-outlined notranslate">
				shopping_cart
			</span>
		Pricing
	</a>

	<a [href]="env.stripeUserLink" mat-stroked-button target="_blank">
		<span class="material-symbols-outlined notranslate">
			credit_card
		</span>
		Account
	</a>

	<button (click)="save(mail.value)"
			[disabled]="!email.valid"
			color="primary"
			mat-flat-button>
		<span class="material-symbols-outlined notranslate">
			verified
		</span>
		Register
	</button>
</mat-dialog-actions>
