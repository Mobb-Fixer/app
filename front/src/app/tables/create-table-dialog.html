<ng-container [formGroup]="form">
	<div cdkDrag
		 cdkDragHandle
		 cdkDragRootElement=".cdk-overlay-pane"
		 mat-dialog-title>
		<div>
			<button
				cdkDragHandle
				mat-icon-button
				style="cursor: grab">
				<span class="material-symbols-outlined">
					drag_indicator
				</span>
			</button>
			<h3>New Table</h3>
		</div>

		<button aria-label="close dialog" mat-dialog-close mat-icon-button>
			<mat-icon>close</mat-icon>
		</button>
	</div>

	<mat-dialog-content>
		<mat-form-field appearance="fill" style="width: 100%">
			<mat-label>Table Name</mat-label>
			<input
				autocomplete="off"
				formControlName="name"
				matInput>
			<mat-error *ngIf="form.get('name')?.errors && form.get('name')!.errors!['pattern']">
				Prefer alpha, numeric and "_", "-"
			</mat-error>
		</mat-form-field>

		<app-column [form]="form"></app-column>
	</mat-dialog-content>

	<mat-dialog-actions>
		<button (click)="addColumn()"
				*ngIf="!form.get('old')"
				color="primary"
				mat-stroked-button>
			<span class="material-symbols-outlined notranslate">
				add
			</span>
			Column
		</button>

		<a *ngIf="selectedServer"
		   [href]="selectedServer!.driver.docs.types"
		   mat-button
		   target="_blank">
			<span class="material-symbols-outlined notranslate">
				help
			</span>
			{{selectedServer.wrapper}} Data Types
		</a>

		<button (click)="create()"
				[disabled]="!form.valid"
				color="primary"
				mat-flat-button>
				<span class="material-symbols-outlined notranslate">
					table
				</span>
			Create Table
		</button>
	</mat-dialog-actions>
</ng-container>
