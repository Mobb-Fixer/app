<mat-toolbar>
	<mat-form-field style="width: 100%; margin-bottom: -1.25em">
		<mat-label>Database to import files</mat-label>
		<input #database
			   [value]="selectedDatabase.name"
			   autocomplete="off"
			   matInput
			   required>
	</mat-form-field>

	<button
		matTooltip="You Can drop your files here"
		mat-icon-button>
		<span class="material-symbols-outlined">
			place_item
		</span>
	</button>
</mat-toolbar>

<div fxLayout="column" fxLayoutAlign="space-between center" style="padding: 20px">

	<div fxFill>
		<input #inputFile (change)="inputChange($event)" accept="{{acceptedExt.join(', ')}}" hidden="true" multiple
			   onclick="this.value=null" type="file"/>
		<button
			fxFill
			(click)="inputFile.click()"
			color="accent"
			mat-stroked-button>
			<span class="material-symbols-outlined notranslate">
				upload_file
			</span>
			Choose [{{acceptedExt.join(', ')}}] files
		</button>
	</div>

	<div *ngFor="let file of files; let i = index" fxFlexFill>

		<div fxFlexFill fxLayout="row" fxLayoutAlign="space-between center">
			<span style="font-size: 16px; margin: 10px; width: 100%;">{{file.name}}</span>
			<mat-progress-bar
				[color]="file.progress < 0 ? 'warn' : 'accent'"
				[value]="file.progress"
				mode="determinate"></mat-progress-bar>
		</div>
		<ngx-monaco-editor
			*ngIf="files[i].text.length < 10000000"
			[(ngModel)]="files[i].text"
			[options]="editorOptions">
		</ngx-monaco-editor>
	</div>

	<mat-divider style="width: 100%; margin: 10px 0px"></mat-divider>

	<div fxFlexFill fxLayout="row" fxLayoutAlign="space-between center">
		<button
			(click)="files = []"
			[disabled]="files.length < 1"
			mat-button>
			Clear All
		</button>

		<button
			(click)="importFiles(database.value)"
			*ngIf="!isLoading"
			[disabled]="files.length < 1"
			color="accent"
			mat-raised-button>
			<span class="material-symbols-outlined notranslate">
				exit_to_app
			</span>
			Load Files
		</button>

		<mat-spinner
			*ngIf="isLoading"
			[diameter]="30"
			color="accent"
		></mat-spinner>
	</div>
</div>
