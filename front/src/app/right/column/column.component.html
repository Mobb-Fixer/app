<div class="container">

	<div *ngFor="let column of form.columns; let i = index"
		 class="column"
		 fxLayout="row"
		 fxLayoutAlign="space-around center"
		 fxLayoutGap="20px">

		<mat-form-field appearance="outline">
			<mat-label>Column Name</mat-label>
			<input [(ngModel)]="column.name"
				   autocomplete="off"
				   matInput
				   required>
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Type</mat-label>
			<input [(ngModel)]="column.type"
				   matInput
				   pattern="^(?!.*size).*$"
				   required
				   type="text">
		</mat-form-field>

		<mat-form-field *ngIf="extraAttributes.length" appearance="fill">
			<mat-label>Extras</mat-label>
			<mat-select [(ngModel)]="column.extra"
						multiple>
				<ng-container *ngFor="let ext of extraAttributes">
					<mat-option
						[value]="ext">
						{{ext}}
					</mat-option>
				</ng-container>
			</mat-select>
		</mat-form-field>

		<mat-slide-toggle
			[(ngModel)]="column.nullable"
			color="primary">
			Nullable
		</mat-slide-toggle>

		<mat-form-field>
			<mat-label>Default Value on Null</mat-label>
			<input [(ngModel)]="column.defaut"
				   [disabled]="!column.nullable"
				   autocomplete="off"
				   matInput>
		</mat-form-field>

		<button (click)="form.columns.splice(i, 1)" *ngIf="!to_update" mat-icon-button mat-raised-button>
			<span class="material-symbols-outlined notranslate">
				remove
			</span>
		</button>

	</div>

	<div style="text-align: center;">
		<button (click)="addColumn()" *ngIf="!to_update" color="primary" mat-icon-button mat-stroked-button>
			<span class="material-symbols-outlined notranslate">
				add
			</span>
		</button>
	</div>
</div>

<mat-expansion-panel>
	<mat-expansion-panel-header>
		<mat-panel-title>
			List of Data Type
		</mat-panel-title>
	</mat-expansion-panel-header>

	<mat-toolbar>
		<mat-slide-toggle
			[(ngModel)]="fullType"
			color="primary">
			Full List
		</mat-slide-toggle>

		<div class="flex-spacer"></div>

		<a [href]="selectedServer!.driver.docs.driver"
		   mat-button
		   mat-stroked-button
		   style="margin-left: 20px"
		   target="_blank">
			<span class="material-symbols-outlined notranslate">
				menu_book
			</span>
			Types of {{selectedServer?.wrapper}}
		</a>
	</mat-toolbar>

	<div>
		<div *ngFor="let group of selectedServer!.driver.language.typeGroups" style="margin: 10px;">

			<span style="font-size: 18px; color: #2196f3">{{group.name}}</span>

			<div style="border-left: 1px solid #2196f3">
				<ng-container *ngIf="fullType">
					<button
						mat-button
						[cdkCopyToClipboard]="type"
						(click)="snackBar.open('Copied to clipboard', '╳', {duration: 3000})"
						*ngFor="let type of group.full">
						{{type}}
					</button>
				</ng-container>
				<ng-container *ngIf="!fullType">
					<button
						mat-button
						[cdkCopyToClipboard]="type"
						(click)="snackBar.open('Copied to clipboard', '╳', {duration: 3000})"
						*ngFor="let type of group.proposition">
						{{type}}
					</button>
				</ng-container>
			</div>
		</div>
	</div>
</mat-expansion-panel>
